/*

DROP TABLE  T_AM_HBV_BAIRRO           CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_CARGO            CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_CIDADE           CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_CLIENTE          CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_CONSUMO          CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_ESTADO           CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_FUNCIONARIO      CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_HIST_PRECO       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_HIST_VALOR       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_HOSPEDAGEM       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_LOGRADOURO       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PAGAMENTO        CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PAG_CARTAO       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PAG_CHEQUE       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PESSOA           CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PESSOA_ENDERECO  CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_PESSOA_TELEFONE  CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_QUARTO           CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_REL_CHEQUE       CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_RESERVA          CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_RESERVA_QUARTO   CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TELEFONE         CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TIPO_CONSUMO     CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TIPO_FORMAPAG    CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TIPO_LOGRADOURO  CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TIPO_QUARTO      CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_TIPO_TELEFONE    CASCADE CONSTRAINTS;
DROP TABLE  T_AM_HBV_STATUS    CASCADE CONSTRAINTS;
COMMIT;

*/

CREATE TABLE T_AM_HBV_BAIRRO (
  cd_bairro NUMBER(5) NOT NULL,
  cd_cidade NUMBER(5) NOT NULL,
  nm_bairro VARCHAR2(30) NOT NULL
);

ALTER TABLE     T_AM_HBV_BAIRRO 
ADD CONSTRAINT  PK_AM_HBV_BAIRRO 
PRIMARY KEY     (cd_bairro);


CREATE TABLE T_AM_HBV_CARGO (
  cd_cargo        NUMBER(4) NOT NULL,
  ds_cargo        VARCHAR2(60) NOT NULL,
  vl_salario_base NUMBER(8,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_CARGO 
ADD CONSTRAINT  PK_AM_HBV_CARGO 
PRIMARY KEY     (cd_cargo);

ALTER TABLE     T_AM_HBV_CARGO
ADD CONSTRAINT  UN_AM_HBV_CARGO_CARGO
UNIQUE          (ds_cargo);


CREATE TABLE T_AM_HBV_CIDADE (
  cd_cidade NUMBER(5) NOT NULL,
  cd_estado NUMBER(2) NOT NULL,
  nm_cidade VARCHAR2(30) NOT NULL
);

ALTER TABLE     T_AM_HBV_CIDADE 
ADD CONSTRAINT  PK_AM_HBV_CIDADE 
PRIMARY KEY     (cd_cidade);

CREATE TABLE T_AM_HBV_CLIENTE (
  cd_cliente          NUMBER(8) NOT NULL,
  nr_cpf              NUMBER(11) NOT NULL,
  nr_rg               NUMBER(10) NOT NULL,
  dt_nascimento       DATE NOT NULL,
  nr_quarto_preferido NUMBER(4),
  ds_email            VARCHAR2(60) NOT NULL,
  ds_senha            VARCHAR2(20) NOT NULL
);

ALTER TABLE     T_AM_HBV_CLIENTE 
ADD CONSTRAINT  PK_AM_HBV_CLIENTE 
PRIMARY KEY     (cd_cliente);

ALTER TABLE     T_AM_HBV_CLIENTE 
ADD CONSTRAINT  UN_AM_HBV_CLIENTE_CPF 
UNIQUE          (nr_cpf);

ALTER TABLE     T_AM_HBV_CLIENTE 
ADD CONSTRAINT  UN_AM_HBV_CLIENTE_EMAIL 
UNIQUE          (ds_email);

ALTER TABLE     T_AM_HBV_CLIENTE 
ADD CONSTRAINT  UN_AM_HBV_CLIENTE_RG 
UNIQUE          (nr_rg);

CREATE TABLE T_AM_HBV_CONSUMO (
  cd_consumo      NUMBER(8) NOT NULL,
  cd_hospedagem   NUMBER(8) NOT NULL,
  cd_tipo_consumo NUMBER(5) NOT NULL,
  cd_funcionario  NUMBER(5) NOT NULL,
  dt_consumo      DATE NOT NULL,
  qt_consumo      NUMBER(3) NOT NULL
);

ALTER TABLE     T_AM_HBV_CONSUMO 
ADD CONSTRAINT  PK_AM_HBV_CONSUMO 
PRIMARY KEY     (cd_hospedagem, cd_consumo);

CREATE TABLE T_AM_HBV_ESTADO (
  cd_estado NUMBER(2) NOT NULL,
  nm_estado VARCHAR2(20) NOT NULL,
  sg_estado CHAR(2) NOT NULL
);

ALTER TABLE     T_AM_HBV_ESTADO 
ADD CONSTRAINT  PK_AM_HBV_ESTADO 
PRIMARY KEY     (cd_estado);

ALTER TABLE     T_AM_HBV_ESTADO 
ADD CONSTRAINT  UN_AM_HBV_ESTADO 
UNIQUE          (nm_estado, sg_estado);

CREATE TABLE T_AM_HBV_FUNCIONARIO (
  cd_funcionario NUMBER(8) NOT NULL,
  cd_cargo       NUMBER(4) NOT NULL,
  dt_admissao    DATE NOT NULL
);

ALTER TABLE     T_AM_HBV_FUNCIONARIO 
ADD CONSTRAINT  PK_AM_HBV_FUNCIONARIO 
PRIMARY KEY     (cd_funcionario);

CREATE TABLE T_AM_HBV_HIST_PRECO (
  cd_hist_preco   NUMBER(8) NOT NULL,
  cd_tipo_consumo NUMBER(5) NOT NULL,
  dt_validade     DATE NOT NULL,
  vl_preco        NUMBER(6,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_HIST_PRECO 
ADD CONSTRAINT  PK_AM_HBV_HIST_PRECO 
PRIMARY KEY     (cd_hist_preco, cd_tipo_consumo);

CREATE TABLE T_AM_HBV_HIST_VALOR (
  cd_hist_valor   NUMBER(6) NOT NULL,
  cd_tipo_quarto  NUMBER(2) NOT NULL,
  dt_validade     DATE NOT NULL,
  vl_preco_quarto NUMBER(6,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_HIST_VALOR 
ADD CONSTRAINT  PK_AM_HBV_HIST_VALOR 
PRIMARY KEY     (cd_tipo_quarto, cd_hist_valor);

CREATE TABLE T_AM_HBV_HOSPEDAGEM (
  cd_hospedagem    NUMBER(8) NOT NULL,
  --cd_reserva       NUMBER(8) NOT NULL,
  --nr_quarto        NUMBER(4) NOT NULL,
  cd_cliente       NUMBER(8) NOT NULL,
  cd_funcionario   NUMBER(8) NOT NULL,
  dt_entrada       DATE NOT NULL,
  dt_saida         DATE,
  vl_perc_desconto NUMBER(5,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_HOSPEDAGEM 
ADD CONSTRAINT  PK_AM_HBV_HOSPEDAGEM 
PRIMARY KEY     (cd_hospedagem);

CREATE TABLE T_AM_HBV_LOGRADOURO (
  nr_cep             NUMBER(8) NOT NULL,
  cd_tipo_logradouro NUMBER(2) NOT NULL,
  cd_bairro          NUMBER(5) NOT NULL,
  ds_descricao       VARCHAR2(60) NOT NULL
);

ALTER TABLE     T_AM_HBV_LOGRADOURO 
ADD CONSTRAINT  PK_AM_HBV_LOGRADOURO 
PRIMARY KEY     (nr_cep);

CREATE TABLE T_AM_HBV_PAGAMENTO (
  cd_hospedagem    NUMBER(8) NOT NULL,
  cd_tipo_formapag NUMBER(1) NOT NULL,
  dt_pagamento     DATE NOT NULL,
  vl_pagamento     NUMBER(8,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_PAGAMENTO 
ADD CONSTRAINT  PK_AM_HBV_PAGAMENTO 
PRIMARY KEY     (cd_hospedagem);

CREATE TABLE T_AM_HBV_PAG_CARTAO (
  cd_pagto_cartao NUMBER(6) NOT NULL,
  cd_hospedagem   NUMBER(8) NOT NULL,
  qt_parcela      NUMBER(1) NOT NULL
);

ALTER TABLE     T_AM_HBV_PAG_CARTAO 
ADD CONSTRAINT  PK_AM_HBV_PAG_CARTAO 
PRIMARY KEY     (cd_hospedagem, cd_pagto_cartao);

CREATE TABLE T_AM_HBV_PAG_CHEQUE (
  cd_pagto_cheque NUMBER(6) NOT NULL,
  cd_hospedagem   NUMBER(8) NOT NULL,
  nr_banco        NUMBER(4) NOT NULL
 );
 
ALTER TABLE T_AM_HBV_PAG_CHEQUE 
ADD CONSTRAINT PK_AM_HBV_PAG_CHEQUE 
PRIMARY KEY (cd_hospedagem, cd_pagto_cheque);

CREATE TABLE T_AM_HBV_PESSOA (
  cd_pessoa NUMBER(8) NOT NULL,
  nm_pessoa VARCHAR2(60) NOT NULL
);
  
ALTER TABLE     T_AM_HBV_PESSOA 
ADD CONSTRAINT  PK_AM_HBV_PESSOA 
PRIMARY KEY     (cd_pessoa);

CREATE TABLE T_AM_HBV_PESSOA_ENDERECO (
  cd_pessoa_endereco NUMBER(8) NOT NULL,
  nr_cep             NUMBER(8) NOT NULL,
  cd_pessoa          NUMBER(8) NOT NULL,
  nr_logradouro      NUMBER(5) NOT NULL,
  ds_complemento     VARCHAR2(30)
);

ALTER TABLE T_AM_HBV_PESSOA_ENDERECO 
ADD CONSTRAINT PK_AM_HBV_PESSOA_ENDERECO 
PRIMARY KEY (cd_pessoa_endereco, nr_cep);

CREATE TABLE T_AM_HBV_PESSOA_TELEFONE (
  cd_pessoa   NUMBER(8) NOT NULL,
  cd_telefone NUMBER(8) NOT NULL,
  nr_ramal    NUMBER(4)
);

ALTER TABLE     T_AM_HBV_PESSOA_TELEFONE 
ADD CONSTRAINT  PK_AM_HBV_PESSOA_TELEFONE 
PRIMARY KEY     (cd_pessoa, cd_telefone);

CREATE TABLE T_AM_HBV_QUARTO (
  nr_quarto      NUMBER(4) NOT NULL,
  cd_tipo_quarto NUMBER(2) NOT NULL,
  nr_andar       NUMBER(2) NOT NULL,
  nr_capacidade  NUMBER(1) NOT NULL,
  status         CHAR(1) NOT NULL
);

ALTER TABLE     T_AM_HBV_QUARTO 
ADD CONSTRAINT  PK_AM_HBV_QUARTO 
PRIMARY KEY     (nr_quarto);

CREATE TABLE T_AM_HBV_REL_CHEQUE (
  cd_pagto_cheque NUMBER(6) NOT NULL,
  cd_hospedagem   NUMBER(8) NOT NULL,
  nr_cheque       NUMBER(5) NOT NULL,
  vl_parcela      NUMBER(8,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_REL_CHEQUE 
ADD CONSTRAINT  PK_AM_HBV_REL_CHEQUE 
PRIMARY KEY     (cd_pagto_cheque, cd_hospedagem);

CREATE TABLE T_AM_HBV_STATUS (
  cd_status   NUMBER(1) NOT NULL,
  nm_status   VARCHAR2(100) NOT NULL
);

ALTER TABLE     T_AM_HBV_STATUS
ADD CONSTRAINT  PK_AM_HBV_STATUS
PRIMARY KEY     (cd_status);

ALTER TABLE     T_AM_HBV_STATUS
ADD CONSTRAINT  UN_AM_HBV_NM_STATUS
UNIQUE          (nm_status);

CREATE TABLE T_AM_HBV_RESERVA (
  cd_reserva        NUMBER(8) NOT NULL,
  cd_cliente        NUMBER(8) NOT NULL,
  cd_funcionario    NUMBER(8) NULL,
  dt_solicitacao    DATE NOT NULL,
  dt_inicio_reserva DATE NOT NULL,
  dt_final_reserva  DATE NOT NULL,
  qt_adulto         NUMBER(1) NOT NULL,
  qt_crianca        NUMBER(1) NOT NULL,
  st_reserva        NUMBER(1) NOT NULL,
  vl_reserva        NUMBER(8,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_RESERVA 
ADD CONSTRAINT  PK_AM_HBV_RESERVA 
PRIMARY KEY     (cd_reserva);

ALTER TABLE     T_AM_HBV_RESERVA 
ADD CONSTRAINT  PK_AM_HBV_RESERVA_STATUS 
FOREIGN KEY     (st_reserva) 
REFERENCES      T_AM_HBV_STATUS (cd_status);

CREATE TABLE T_AM_HBV_RESERVA_QUARTO (
  cd_reserva       NUMBER(8) NOT NULL,
  nr_quarto        NUMBER(4) NOT NULL,
  qt_pessoa_quarto NUMBER(1) NOT NULL,
  ds_observacao    VARCHAR2(128)
);
  
ALTER TABLE     T_AM_HBV_RESERVA_QUARTO 
ADD CONSTRAINT  PK_AM_HBV_RESERVA_QUARTO 
PRIMARY KEY     (cd_reserva, nr_quarto);

CREATE TABLE T_AM_HBV_TELEFONE (
  cd_telefone      NUMBER(8) NOT NULL,
  cd_tipo_telefone NUMBER(2) NOT NULL,
  nr_ddd           NUMBER(3) NOT NULL,
  nr_telefone      NUMBER(9) NOT NULL
);

ALTER TABLE T_AM_HBV_TELEFONE 
ADD CONSTRAINT PK_AM_HBV_TELEFONE 
PRIMARY KEY (cd_telefone) ;

CREATE TABLE T_AM_HBV_TIPO_CONSUMO (
  cd_tipo_consumo NUMBER(5) NOT NULL,
  ds_tipo_consumo VARCHAR2(40) NOT NULL,
  nr_tipo         NUMBER(1) NOT NULL,
  vl_unit         NUMBER(6,2) NOT NULL
);

ALTER TABLE     T_AM_HBV_TIPO_CONSUMO 
ADD CONSTRAINT  PK_AM_HBV_CONSUMOv2 
PRIMARY KEY     (cd_tipo_consumo);

ALTER TABLE     T_AM_HBV_TIPO_CONSUMO 
ADD CONSTRAINT  UN_AM_HBV_TIPO_CONSUMO_DESC 
UNIQUE          (ds_tipo_consumo);

CREATE TABLE T_AM_HBV_TIPO_FORMAPAG
  (
    cd_tipo_formapag NUMBER (1) NOT NULL ,
    ds_formapag      VARCHAR2 (40) NOT NULL
  ) ;
  
ALTER TABLE T_AM_HBV_TIPO_FORMAPAG ADD CONSTRAINT PK_AM_HBV_TIPO_FORMAPAG PRIMARY KEY ( cd_tipo_formapag ) ;

ALTER TABLE T_AM_HBV_TIPO_FORMAPAG ADD CONSTRAINT UN_AM_HBV_TIPO_FORMAPAG UNIQUE ( ds_formapag ) ;

CREATE TABLE T_AM_HBV_TIPO_LOGRADOURO
  (
    cd_tipo_logradouro NUMBER (2) NOT NULL ,
    ds_tipo_logradouro VARCHAR2 (30) NOT NULL
  ) ;
  
ALTER TABLE T_AM_HBV_TIPO_LOGRADOURO ADD CONSTRAINT PK_AM_HBV_TIPO_LOGRADOURO PRIMARY KEY ( cd_tipo_logradouro ) ;

ALTER TABLE T_AM_HBV_TIPO_LOGRADOURO ADD CONSTRAINT UN_AM_HBV_TIPO_LOG UNIQUE ( ds_tipo_logradouro ) ;

CREATE TABLE T_AM_HBV_TIPO_QUARTO (
  cd_tipo_quarto NUMBER(2) NOT NULL,
  ds_tipo_quarto VARCHAR2(25) NOT NULL,
  ds_observacao VARCHAR2(25) NULL,
  vl_quarto   NUMBER(6,2) NOT NULL
);
  
ALTER TABLE     T_AM_HBV_TIPO_QUARTO 
ADD CONSTRAINT  PK_AM_HBV_TIPO_QUARTO 
PRIMARY KEY     (cd_tipo_quarto);

CREATE TABLE T_AM_HBV_TIPO_TELEFONE (
  cd_tipo_telefone NUMBER(2) NOT NULL,
  ds_tipo_telefone VARCHAR2(20) NOT NULL
);
  
ALTER TABLE     T_AM_HBV_TIPO_TELEFONE 
ADD CONSTRAINT  PK_AM_HBV_TIPO_TELEFONE 
PRIMARY KEY     (cd_tipo_telefone);

ALTER TABLE     T_AM_HBV_TIPO_TELEFONE 
ADD CONSTRAINT  UN_AM_HBV_TIPO_FONE 
UNIQUE          (ds_tipo_telefone);

ALTER TABLE T_AM_HBV_BAIRRO 
ADD CONSTRAINT FK_AM_HBV_BAIRRO_CIDADE 
FOREIGN KEY ( cd_cidade ) 
REFERENCES T_AM_HBV_CIDADE ( cd_cidade )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PAG_CHEQUE 
ADD CONSTRAINT FK_AM_HBV_CHEQUE_PAGTO
FOREIGN KEY ( cd_hospedagem ) 
REFERENCES T_AM_HBV_PAGAMENTO ( cd_hospedagem )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_CIDADE 
ADD CONSTRAINT FK_AM_HBV_CIDADE_ESTADO 
FOREIGN KEY ( cd_estado ) 
REFERENCES T_AM_HBV_ESTADO ( cd_estado )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_CLIENTE 
ADD CONSTRAINT FK_AM_HBV_CLIENTE_PESSOA 
FOREIGN KEY ( cd_cliente ) 
REFERENCES T_AM_HBV_PESSOA ( cd_pessoa )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_CONSUMO 
ADD CONSTRAINT FK_AM_HBV_CONSUMO_FUNC 
FOREIGN KEY ( cd_funcionario ) 
REFERENCES T_AM_HBV_FUNCIONARIO ( cd_funcionario )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_CONSUMO 
ADD CONSTRAINT FK_AM_HBV_CONSUMO_HOSPEDAGEM 
FOREIGN KEY ( cd_hospedagem ) 
REFERENCES T_AM_HBV_HOSPEDAGEM ( cd_hospedagem )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_CONSUMO 
ADD CONSTRAINT FK_AM_HBV_CONSUMO_TIPO_CONSUMO 
FOREIGN KEY ( cd_tipo_consumo ) 
REFERENCES T_AM_HBV_TIPO_CONSUMO ( cd_tipo_consumo )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_TELEFONE 
ADD CONSTRAINT FK_AM_HBV_FONE_TIPO_FONE 
FOREIGN KEY ( cd_tipo_telefone ) 
REFERENCES T_AM_HBV_TIPO_TELEFONE ( cd_tipo_telefone )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_FUNCIONARIO 
ADD CONSTRAINT FK_AM_HBV_FUNC_CARGO 
FOREIGN KEY ( cd_cargo ) 
REFERENCES T_AM_HBV_CARGO ( cd_cargo ) ;

ALTER TABLE T_AM_HBV_FUNCIONARIO 
ADD CONSTRAINT FK_AM_HBV_FUNC_PESSOA 
FOREIGN KEY ( cd_funcionario ) 
REFERENCES T_AM_HBV_PESSOA ( cd_pessoa )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_HIST_PRECO 
ADD CONSTRAINT FK_AM_HBV_HISTPREC_PROD_SERV 
FOREIGN KEY ( cd_tipo_consumo ) 
REFERENCES T_AM_HBV_TIPO_CONSUMO ( cd_tipo_consumo )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_HIST_VALOR 
ADD CONSTRAINT FK_AM_HBV_HISTVALOR_TIPOQUARTO 
FOREIGN KEY ( cd_tipo_quarto ) 
REFERENCES T_AM_HBV_TIPO_QUARTO ( cd_tipo_quarto )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_HOSPEDAGEM 
ADD CONSTRAINT FK_AM_HBV_HOSPEDAGEM_CLIENTE 
FOREIGN KEY ( cd_cliente ) 
REFERENCES T_AM_HBV_CLIENTE ( cd_cliente )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_HOSPEDAGEM 
ADD CONSTRAINT FK_AM_HBV_HOSPEDAGEM_FUNC 
FOREIGN KEY ( cd_funcionario ) 
REFERENCES T_AM_HBV_FUNCIONARIO ( cd_funcionario )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_HOSPEDAGEM 
ADD CONSTRAINT FK_AM_HBV_HOSP_RESERVA 
FOREIGN KEY ( cd_hospedagem) 
REFERENCES T_AM_HBV_RESERVA ( cd_reserva)
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_LOGRADOURO 
ADD CONSTRAINT FK_AM_HBV_LOGRADOURO_BAIRRO 
FOREIGN KEY ( cd_bairro ) 
REFERENCES T_AM_HBV_BAIRRO ( cd_bairro )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_LOGRADOURO 
ADD CONSTRAINT FK_AM_HBV_LOGRADOURO_TIPO_LOG 
FOREIGN KEY ( cd_tipo_logradouro )
REFERENCES T_AM_HBV_TIPO_LOGRADOURO ( cd_tipo_logradouro )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PAG_CARTAO 
ADD CONSTRAINT FK_AM_HBV_PAGCARTAO_PAGTO 
FOREIGN KEY ( cd_hospedagem ) 
REFERENCES T_AM_HBV_PAGAMENTO ( cd_hospedagem )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PAGAMENTO 
ADD CONSTRAINT FK_AM_HBV_PAGTO_HOSPEDAGEM 
FOREIGN KEY ( cd_hospedagem ) 
REFERENCES T_AM_HBV_HOSPEDAGEM ( cd_hospedagem )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PAGAMENTO 
ADD CONSTRAINT FK_AM_HBV_PAGTO_TIPO_FORMAPAG 
FOREIGN KEY ( cd_tipo_formapag ) 
REFERENCES T_AM_HBV_TIPO_FORMAPAG ( cd_tipo_formapag )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PESSOA_ENDERECO 
ADD CONSTRAINT FK_AM_HBV_PESSOA_ENDE_LOG 
FOREIGN KEY ( nr_cep ) 
REFERENCES T_AM_HBV_LOGRADOURO ( nr_cep )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PESSOA_ENDERECO 
ADD CONSTRAINT FK_AM_HBV_PESSOA_ENDE_PESSOA 
FOREIGN KEY ( cd_pessoa ) 
REFERENCES T_AM_HBV_PESSOA ( cd_pessoa )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PESSOA_TELEFONE 
ADD CONSTRAINT FK_AM_HBV_PESSOA_FONE_FONE 
FOREIGN KEY ( cd_pessoa ) 
REFERENCES T_AM_HBV_PESSOA ( cd_pessoa )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_PESSOA_TELEFONE 
ADD CONSTRAINT FK_AM_HBV_PESSOA_FONE_PESSOA 
FOREIGN KEY ( cd_telefone ) 
REFERENCES T_AM_HBV_TELEFONE ( cd_telefone )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_QUARTO 
ADD CONSTRAINT FK_AM_HBV_QUARTO_TIPOQUARTO
FOREIGN KEY ( cd_tipo_quarto ) 
REFERENCES T_AM_HBV_TIPO_QUARTO ( cd_tipo_quarto )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_REL_CHEQUE 
ADD CONSTRAINT FK_AM_HBV_RELCHEQUE_PAGCHEQUE 
FOREIGN KEY ( cd_hospedagem, cd_pagto_cheque ) 
REFERENCES T_AM_HBV_PAG_CHEQUE ( cd_hospedagem, cd_pagto_cheque )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_RESERVA_QUARTO 
ADD CONSTRAINT FK_AM_HBV_RESERVAQTO_RESERVA 
FOREIGN KEY ( cd_reserva ) 
REFERENCES T_AM_HBV_RESERVA ( cd_reserva )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_RESERVA_QUARTO 
ADD CONSTRAINT FK_AM_HBV_RESERVAQUARTO_QUARTO 
FOREIGN KEY ( nr_quarto ) 
REFERENCES T_AM_HBV_QUARTO ( nr_quarto )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_RESERVA 
ADD CONSTRAINT FK_AM_HBV_RESERVA_CLIENTE 
FOREIGN KEY ( cd_cliente ) 
REFERENCES T_AM_HBV_CLIENTE ( cd_cliente )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_RESERVA 
ADD CONSTRAINT FK_AM_HBV_RESERVA_FUNC 
FOREIGN KEY ( cd_funcionario ) 
REFERENCES T_AM_HBV_FUNCIONARIO ( cd_funcionario )
ON DELETE CASCADE;

ALTER TABLE T_AM_HBV_RESERVA 
ADD CONSTRAINT CK_AM_HBV_RESERVA 
CHECK(st_reserva in (1, 2, 3));

ALTER TABLE T_AM_HBV_RESERVA 
ADD CONSTRAINT CK_AM_HBV_RESERVA_DATA 
CHECK(dt_final_reserva >= dt_inicio_reserva);

ALTER TABLE T_AM_HBV_HOSPEDAGEM 
ADD CONSTRAINT CK_AM_HBV_HOSPEDAGEM_DATA 
CHECK(dt_saida >= dt_entrada);

ALTER TABLE T_AM_HBV_PAG_CARTAO 
ADD CONSTRAINT CK_AM_HBV_PAGCARTAO_PARC 
CHECK(qt_parcela > 0);

ALTER TABLE T_AM_HBV_CONSUMO 
ADD CONSTRAINT CK_AM_HBV_CONSUMO 
CHECK(qt_consumo > 0);

ALTER TABLE T_AM_HBV_TIPO_CONSUMO 
ADD CONSTRAINT CK_AM_HBV_PRODUTO_SERVICO 
CHECK(nr_tipo IN (1,2));

COMMIT;